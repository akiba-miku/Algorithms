### 一维差分

**差分** 是一种算法常用的技巧，用于快速更新原数组区间更新。
比如对于一个一维数组[0,...10]
对[2,5]区间+3
对[3,6]区间-2
对[1,8]区间+5
...

等等一系列增加或者减少(增加负值)操作。
可以$O(n)$更新完毕。

### 思路
思路是逆向使用前缀和， 即将原数组视为某个数组的前缀和数组， 这里将这个数组记为差分数组d。
通过对在d数组进行修改， 然后对d数组进行滚动更新。 得到更新完毕后的a数组。

#### 1. 差分数组的定义
给定一个原数组 `a`，其差分数组 `d` 定义为：
- `d[1] = a[1]`
- `d[i] = a[i] - a[i-1]` （对于 `i > 1`）

#### 2. 差分数组的作用
差分数组的核心作用是：
- **快速区间更新**：如果我们想对原数组 `a` 的某个区间 `[l, r]` 中的每个元素加上一个值 `c`，可以通过对差分数组 `d` 进行如下操作：
  - `d[l] += c`
  - `d[r+1] -= c`
  然后通过前缀和还原出更新后的原数组。

#### 3. 差分数组的构建
假设原数组为 `a`，差分数组为 `d`，则：
- `d[1] = a[1]`
- `d[i] = a[i] - a[i-1]` （`i > 1`）

#### 4. 区间更新操作
如果我们想对原数组 `a` 的区间 `[l, r]` 中的每个元素加上 `c`，只需对差分数组 `d` 进行如下操作：
- `d[l] += c`
- `d[r+1] -= c`

#### 5. 还原原数组
通过差分数组 `d` 还原原数组 `a`：
- `a[1] = d[1]`
- `a[i] = a[i-1] + d[i]` （`i > 1`）

---

### 示例

#### 问题描述
给定一个长度为 `n` 的数组 `a`，进行 `m` 次操作，每次操作对区间 `[l, r]` 中的每个元素加上 `c`。最后输出更新后的数组。

#### 输入
```
5 3       // n=5, m=3
1 2 3 4 5 // 原数组
1 3 2     // 对区间 [1,3] 加 2
2 4 1     // 对区间 [2,4] 加 1
3 5 3     // 对区间 [3,5] 加 3
```



#### 时间复杂度
- 构建差分数组：`O(n)`
- 每次区间更新：`O(1)`
- 还原原数组：`O(n)`
- 总时间复杂度：`O(n + m)`

#### 空间复杂度
- 需要额外的差分数组 `d`，空间复杂度为 `O(n)`。

---

### 差分数组的应用场景
1. **区间更新**：对数组的某个区间进行统一的增减操作。
2. **多次操作后的最终结果**：在多次区间更新后，快速得到最终的数组。
3. **与前缀和结合**：差分数组和前缀和经常结合使用，用于解决复杂的区间问题。

通过差分数组，将区间更新的时间复杂度从 `O(n)` 优化到 `O(1)`，非常适合处理大规模数据频繁修改区间。